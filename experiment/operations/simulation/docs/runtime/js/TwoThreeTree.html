<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2021-03-17 Wed 07:39 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>&lrm;</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="VLEAD" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2017 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orge2db426">1. Code for 23 tree Demo</a>
<ul>
<li><a href="#org85769b8">1.1. Declaring global variables for tree parameters</a></li>
<li><a href="#org160322c">1.2. Constructor the the tree. It takes the canvas as 'am', width and heigh as parameters</a></li>
<li><a href="#org2468bda">1.3. Function to initialize the Tree with its parameters, this is the function which gets called first in the tree life cycle</a></li>
<li><a href="#orgd7519fd">1.4. Function that adds controls to the top bar of the artefacts and shows buttons and text boxes.</a></li>
<li><a href="#org07492b6">1.5. Function resets the operations that were done on the tree.</a></li>
<li><a href="#orgdf4f589">1.6. Function enables click on the UI after the animation has been played out</a></li>
<li><a href="#orge5a165a">1.7. Function disables the UI during the animation play so that no other operation or control is available while animation is being played out.</a></li>
<li><a href="#orgea68672">1.8. Function is called whenever an insert operation is performed on the tree after click the Insert Button rendered on the UI.</a></li>
<li><a href="#orge1b5752">1.9. Function is called whenever a delete operation is performed on the tree and handles the delete operation.</a></li>
<li><a href="#org69db04e">1.10. Function is called whenever a click on the Clear button is made on the UI.</a></li>
<li><a href="#org0a52f43">1.11. Function is called when the print functionality of the tree is invoked.</a></li>
<li><a href="#org0ca797e">1.12. Function prints the tree nodes, essentially performs a traversal on the tree.</a></li>
<li><a href="#orgd2160b5">1.13. Function prints the tree in a recursive order.</a></li>
<li><a href="#org175b882">1.14. Function to clear the tree and delete all its nodes, makes an internal call to deleteTree.</a></li>
<li><a href="#orgcb62fe9">1.15. Function called from clear tree functionality and is responsible for delteting all the elements in the tree.</a></li>
<li><a href="#orge337bf3">1.16. Function called when a find/search operation is performed on the tree.</a></li>
<li><a href="#orgea9b5fe">1.17. Function performs the find functionality on the tree, receives the element to be searched in the arguments.</a></li>
<li><a href="#org933976e">1.18. Function performs the actual find operation. Called from findElement.</a></li>
<li><a href="#orgb059c02">1.19. Function performs the insert operation on the tree and receives the value to be inserted as its arguments.</a></li>
<li><a href="#orgf951502">1.20. Function for displaying error message on the screen.</a></li>
<li><a href="#org178310b">1.21. Function is called to perform the actual insert operation in the in memory tree DS. This takes in an argument to be inserted into the tree.</a></li>
<li><a href="#orgfc6cfff">1.22. Function handles the case when an insertion into the tree node violates the propery and internally calls split</a></li>
<li><a href="#org2ee7e46">1.23. Function performs the split operation on the nodes when insertion has caused a violation 23 tree property</a></li>
<li><a href="#org4dc7f28">1.24. Function is called when a delete operation is performed on the tree. Takes in the value to be deleted as argument.</a></li>
<li><a href="#org6c7c472">1.25. This function performs actual delete operation on the tree.</a></li>
<li><a href="#org8c710ae">1.26. Function performs merge operation on the tree keys after the delete operation violates the tree properties</a></li>
<li><a href="#org5638979">1.27. Helper function to perform redistribution of keys in the tree node after the 23 tree property has been violated.</a></li>
<li><a href="#org5767832">1.28. Helper function to perform the delete operation, it essentially performs a merge operation and renders correct message on UI</a></li>
<li><a href="#org793d1ba">1.29. Function called to perform repair operation on the tree after a delete operation has violated the tree property</a></li>
<li><a href="#org2a84441">1.30. Function returns the label of the node in the tree.</a></li>
<li><a href="#org9023616">1.31. Function resizes the tree according to the start_x and start_y coordinate.</a></li>
<li><a href="#org1add68d">1.32. Function responsible for setting the new position of the node in the tree. This needs to be called during insertion and deletion</a></li>
<li><a href="#org9e5522c">1.33. Function animates the new positions of elements in the tree this is called after and during the insertion, split and deletion operation.</a></li>
<li><a href="#orgb90bfc9">1.34. Function resizes the width og the tree as a whole and node just the nodes. This width is calculated using number of keys in the tree, width per node and their spacing.</a></li>
<li><a href="#org9077554">1.35. Function takes in the id, intial pos_X and pos_Y and initialises the tree node.</a></li>
<li><a href="#org0fec396">1.36. Function initialises the canvas on which the tree is rendered and is called first from the UI.</a></li>
</ul>
</li>
<li><a href="#org6e3ef12">2. Tangle</a></li>
</ul>
</div>
</div>
<div id="outline-container-orge2db426" class="outline-2">
<h2 id="orge2db426"><span class="section-number-2">1</span> Code for 23 tree Demo</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-org85769b8" class="outline-3">
<h3 id="org85769b8"><span class="section-number-3">1.1</span> Declaring global variables for tree parameters</h3>
<div class="outline-text-3" id="text-1-1">
<div class="org-src-container">
<pre class="src src-js" id="org1e9dbd1"><span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">FIRST_PRINT_POS_X</span> = 50;
<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">PRINT_VERTICAL_GAP</span> = 20;
<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">PRINT_MAX</span> = 990;
<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">PRINT_HORIZONTAL_GAP</span> = 50;

<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">MIN_MAX_DEGREE</span> = 3;
<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">MAX_MAX_DEGREE</span> = 3;

<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">HEIGHT_DELTA</span>  = 60;
<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">NODE_SPACING</span> = 10; 
<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">STARTING_Y</span> = 70;
<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">WIDTH_PER_ELEM</span> = 80;
<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">NODE_HEIGHT</span> = 20;

<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">MESSAGE_X</span> = 5;
<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">MESSAGE_Y</span> = 10;

<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">LINK_COLOR</span> = <span style="font-style: italic;">"#007700"</span>;
<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">HIGHLIGHT_CIRCLE_COLOR</span> = <span style="font-style: italic;">"#007700"</span>;
<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">FOREGROUND_COLOR</span> = <span style="font-style: italic;">"#000000"</span>;
<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">BACKGROUND_COLOR</span> = <span style="font-style: italic;">"#97CB3B"</span>;
<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">PRINT_COLOR</span> = FOREGROUND_COLOR;
</pre>
</div>
</div>
</div>

<div id="outline-container-org160322c" class="outline-3">
<h3 id="org160322c"><span class="section-number-3">1.2</span> Constructor the the tree. It takes the canvas as 'am', width and heigh as parameters</h3>
<div class="outline-text-3" id="text-1-2">
<p>
+We are doing a sort of "faked" inheritance within javascript. We define our function, 
set the prototype of our function to the prototype of our superclass, 
reset the constructor to be our own constructor, 
and then cache the superclass prototype, for simulating a java-style "super" call. 
</p>

<p>
+Notice that to make inheritance work well on counstructors, we don't do anything 
in the main constructor function other than call an 
init function (that way we can have our init function call the init 
function of the superclass. Yes, this is a bit of a hack.)
</p>

<div class="org-src-container">
<pre class="src src-js" id="org45452ac"><span style="font-weight: bold;">function</span> <span style="font-weight: bold;">TwoThreeTree</span>(<span style="font-weight: bold; font-style: italic;">am</span>, <span style="font-weight: bold; font-style: italic;">w</span>, <span style="font-weight: bold; font-style: italic;">h</span>)
{
        <span style="font-weight: bold; text-decoration: underline;">this</span>.init(am, w, h);

}
TwoThreeTree.<span style="font-weight: bold; text-decoration: underline;">prototype</span> = <span style="font-weight: bold;">new</span> <span style="font-weight: bold; text-decoration: underline;">Algorithm</span>();
TwoThreeTree.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.varructor = TwoThreeTree;
TwoThreeTree.superclass = Algorithm.<span style="font-weight: bold; text-decoration: underline;">prototype</span>;
</pre>
</div>
</div>
</div>

<div id="outline-container-org2468bda" class="outline-3">
<h3 id="org2468bda"><span class="section-number-3">1.3</span> Function to initialize the Tree with its parameters, this is the function which gets called first in the tree life cycle</h3>
<div class="outline-text-3" id="text-1-3">
<p>
+All of the work of the constructor is done in the init function &#x2013; 
that way constructors of subclass can effectively call the constructors of 
their superclasses. For the init function in this case, we need to do very 
little work. Here, we are not adding any elements to the canvas at load time. 
</p>

<p>
+All we need to do is set up our own internal data structures.
</p>

<div class="org-src-container">
<pre class="src src-js" id="org19263fa">TwoThreeTree.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.init = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">am</span>, <span style="font-weight: bold; font-style: italic;">w</span>, <span style="font-weight: bold; font-style: italic;">h</span>)
{
        TwoThreeTree.superclass.init.call(<span style="font-weight: bold; text-decoration: underline;">this</span>, am, w, h);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.nextIndex = 0;

        <span style="font-weight: bold; text-decoration: underline;">this</span>.starting_x = w / 3;

        <span style="font-weight: bold; text-decoration: underline;">this</span>.preemptiveSplit = <span style="font-weight: bold; text-decoration: underline;">false</span>
        <span style="font-weight: bold; text-decoration: underline;">this</span>.addControls();
        <span style="font-weight: bold; text-decoration: underline;">this</span>.max_keys = 2;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.min_keys = 1;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.split_index = 1;
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.max_degree = 3;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.messageID = <span style="font-weight: bold; text-decoration: underline;">this</span>.nextIndex++;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"CreateLabel"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.messageID, <span style="font-style: italic;">""</span>, MESSAGE_X, MESSAGE_Y, 0);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.moveLabel1ID = <span style="font-weight: bold; text-decoration: underline;">this</span>.nextIndex++;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.moveLabel2ID = <span style="font-weight: bold; text-decoration: underline;">this</span>.nextIndex++;
        
        animationManager.StartNewAnimation(<span style="font-weight: bold; text-decoration: underline;">this</span>.commands);
        animationManager.skipForward();
        animationManager.clearHistory();
        <span style="font-weight: bold; text-decoration: underline;">this</span>.commands = <span style="font-weight: bold;">new</span> <span style="font-weight: bold; text-decoration: underline;">Array</span>();
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.first_print_pos_y = h - 3 * PRINT_VERTICAL_GAP;

        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.xPosOfNextLabel = 100;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.yPosOfNextLabel = 200;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd7519fd" class="outline-3">
<h3 id="orgd7519fd"><span class="section-number-3">1.4</span> Function that adds controls to the top bar of the artefacts and shows buttons and text boxes.</h3>
<div class="outline-text-3" id="text-1-4">
<p>
+Next up is the method to add algorithm controls and callbacks. 
The tricky bit here is that we can't do something like:
this.popButton.onclick = this.popCallback
to add our callbacks. 
</p>

<p>
+Why not? 
This would pass in the proper function, but not the proper contex &#x2013; essentially, 
it would be passing a pointer to the code of the function, without saving the "this" pointer. 
</p>

<p>
+So we need to bind the "this" pointer to our function before we store it.
</p>

<div class="org-src-container">
<pre class="src src-js" id="orgab96c98">TwoThreeTree.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.addControls =  <span style="font-weight: bold;">function</span>()
{
        <span style="font-weight: bold; text-decoration: underline;">this</span>.controls = [];
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.insertField = document.getElementById(<span style="font-style: italic;">"control-demo-insert-text"</span>);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.insertField.onkeydown = <span style="font-weight: bold; text-decoration: underline;">this</span>.returnSubmit(<span style="font-weight: bold; text-decoration: underline;">this</span>.insertField,  <span style="font-weight: bold; text-decoration: underline;">this</span>.insertCallback.bind(<span style="font-weight: bold; text-decoration: underline;">this</span>), 4);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.controls.push(<span style="font-weight: bold; text-decoration: underline;">this</span>.insertField);
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.insertButton = document.getElementById(<span style="font-style: italic;">"control-demo-insert-btn"</span>);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.insertButton.onclick = <span style="font-weight: bold; text-decoration: underline;">this</span>.insertCallback.bind(<span style="font-weight: bold; text-decoration: underline;">this</span>);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.controls.push(<span style="font-weight: bold; text-decoration: underline;">this</span>.insertButton);
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.deleteField = document.getElementById(<span style="font-style: italic;">"control-demo-delete-text"</span>);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.deleteField.onkeydown = <span style="font-weight: bold; text-decoration: underline;">this</span>.returnSubmit(<span style="font-weight: bold; text-decoration: underline;">this</span>.deleteField,  <span style="font-weight: bold; text-decoration: underline;">this</span>.deleteCallback.bind(<span style="font-weight: bold; text-decoration: underline;">this</span>), 4);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.controls.push(<span style="font-weight: bold; text-decoration: underline;">this</span>.deleteField);
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.deleteButton = document.getElementById(<span style="font-style: italic;">"control-demo-delete-btn"</span>);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.deleteButton.onclick = <span style="font-weight: bold; text-decoration: underline;">this</span>.deleteCallback.bind(<span style="font-weight: bold; text-decoration: underline;">this</span>);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.controls.push(<span style="font-weight: bold; text-decoration: underline;">this</span>.deleteButton);
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.findField = document.getElementById(<span style="font-style: italic;">"control-demo-find-text"</span>);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.findField.onkeydown = <span style="font-weight: bold; text-decoration: underline;">this</span>.returnSubmit(<span style="font-weight: bold; text-decoration: underline;">this</span>.findField,  <span style="font-weight: bold; text-decoration: underline;">this</span>.findCallback.bind(<span style="font-weight: bold; text-decoration: underline;">this</span>), 4);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.controls.push(<span style="font-weight: bold; text-decoration: underline;">this</span>.findField);
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.findButton = document.getElementById(<span style="font-style: italic;">"control-demo-find-btn"</span>);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.findButton.onclick = <span style="font-weight: bold; text-decoration: underline;">this</span>.findCallback.bind(<span style="font-weight: bold; text-decoration: underline;">this</span>);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.controls.push(<span style="font-weight: bold; text-decoration: underline;">this</span>.findButton);
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.printButton = document.getElementById(<span style="font-style: italic;">"control-demo-print"</span>);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.printButton.onclick = <span style="font-weight: bold; text-decoration: underline;">this</span>.printCallback.bind(<span style="font-weight: bold; text-decoration: underline;">this</span>);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.controls.push(<span style="font-weight: bold; text-decoration: underline;">this</span>.printButton);
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.clearButton = document.getElementById(<span style="font-style: italic;">"control-demo-clear"</span>);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.clearButton.onclick = <span style="font-weight: bold; text-decoration: underline;">this</span>.clearCallback.bind(<span style="font-weight: bold; text-decoration: underline;">this</span>);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.controls.push(<span style="font-weight: bold; text-decoration: underline;">this</span>.clearButton);
        
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org07492b6" class="outline-3">
<h3 id="org07492b6"><span class="section-number-3">1.5</span> Function resets the operations that were done on the tree.</h3>
<div class="outline-text-3" id="text-1-5">
<p>
+All visualizations must implement the reset method. 
The reset method needs to restore all of our variables to the state that they were 
in right after the call to init. 
</p>

<p>
+In our case, we first set the max_degree to 3,
set the root of the tree to null and the split index to 1.
</p>

<div class="org-src-container">
<pre class="src src-js" id="org93f513f">TwoThreeTree.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.reset = <span style="font-weight: bold;">function</span>()
{
        <span style="font-weight: bold; text-decoration: underline;">this</span>.nextIndex = 3;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.max_degree = 3;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.max_keys = 2;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.min_keys = 1;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.split_index = 1;
        <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">NOTE: The order of these last two this.commands matters!</span>
        <span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot = <span style="font-weight: bold; text-decoration: underline;">null</span>;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.ignoreInputs = <span style="font-weight: bold; text-decoration: underline;">true</span>;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.ignoreInputs = <span style="font-weight: bold; text-decoration: underline;">false</span>;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdf4f589" class="outline-3">
<h3 id="orgdf4f589"><span class="section-number-3">1.6</span> Function enables click on the UI after the animation has been played out</h3>
<div class="outline-text-3" id="text-1-6">
<p>
+Called by our superclass when we get an animation completed event &#x2013; we can now interact again.
</p>

<div class="org-src-container">
<pre class="src src-js" id="org0ac4603">TwoThreeTree.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.enableUI = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">event</span>)
{
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">i</span>;
        <span style="font-weight: bold;">for</span> (i = 0; i &lt; <span style="font-weight: bold; text-decoration: underline;">this</span>.controls.length; i++)
        {
                <span style="font-weight: bold; text-decoration: underline;">this</span>.controls[i].disabled = <span style="font-weight: bold; text-decoration: underline;">false</span>;
        }
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orge5a165a" class="outline-3">
<h3 id="orge5a165a"><span class="section-number-3">1.7</span> Function disables the UI during the animation play so that no other operation or control is available while animation is being played out.</h3>
<div class="outline-text-3" id="text-1-7">
<p>
+Called by our superclass when we get an animation started event &#x2013; need to wait for the
event to finish before we start doing anything
</p>

<div class="org-src-container">
<pre class="src src-js" id="org9ff1b65">TwoThreeTree.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.disableUI = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">event</span>)
{
        <span style="font-weight: bold;">for</span> (<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">i</span> = 0; i &lt; <span style="font-weight: bold; text-decoration: underline;">this</span>.controls.length; i++)
        {
                <span style="font-weight: bold; text-decoration: underline;">this</span>.controls[i].disabled = <span style="font-weight: bold; text-decoration: underline;">true</span>;
        }
        
}
</pre>
</div>
</div>
</div>


<div id="outline-container-orgea68672" class="outline-3">
<h3 id="orgea68672"><span class="section-number-3">1.8</span> Function is called whenever an insert operation is performed on the tree after click the Insert Button rendered on the UI.</h3>
<div class="outline-text-3" id="text-1-8">
<p>
+The insert callback function does not perform any insert operation on its own. It makes a call to the implementAction function, the implement action function receives two arguments - a bounded function and the value to be inserted in to the tree. 
</p>

<p>
+The implementAction function then makes a call to the function it receives along the value to be inserted. The insert operation is performed thereafter.
</p>

<div class="org-src-container">
<pre class="src src-js" id="org7d02915">TwoThreeTree.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.insertCallback = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">event</span>)
{
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">insertedValue</span> ;

        insertedValue = parseInt(<span style="font-weight: bold; text-decoration: underline;">this</span>.insertField.value,10);
        <span style="font-weight: bold;">if</span>(!isNaN(insertedValue)){

                <span style="font-weight: bold;">if</span> (insertedValue != <span style="font-style: italic;">""</span>){
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.insertField.value = <span style="font-style: italic;">""</span>;
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.implementAction(<span style="font-weight: bold; text-decoration: underline;">this</span>.insertElement.bind(<span style="font-weight: bold; text-decoration: underline;">this</span>),insertedValue);
                }
        }<span style="font-weight: bold;">else</span>{
                <span style="font-weight: bold; text-decoration: underline;">this</span>.implementAction(<span style="font-weight: bold; text-decoration: underline;">this</span>.valueErrorMessage.bind(<span style="font-weight: bold; text-decoration: underline;">this</span>),<span style="font-style: italic;">""</span>)
        }
        
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orge1b5752" class="outline-3">
<h3 id="orge1b5752"><span class="section-number-3">1.9</span> Function is called whenever a delete operation is performed on the tree and handles the delete operation.</h3>
<div class="outline-text-3" id="text-1-9">
<p>
+The actual delete operation does not happen in the deleteCallback function as with all the callback functions that we have implemented. 
</p>

<p>
+Here also, we make a call to the implementAction function which takes in deleteElement function and the value to be deleted as parameters. The deleteElement function then performs the actual delete operation.
</p>

<div class="org-src-container">
<pre class="src src-js" id="org674489a">TwoThreeTree.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.deleteCallback = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">event</span>)
{
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">deletedValue</span> = <span style="font-weight: bold; text-decoration: underline;">this</span>.deleteField.value;
        <span style="font-weight: bold;">if</span> (deletedValue != <span style="font-style: italic;">""</span>)
        {
                deletedValue = parseInt(<span style="font-weight: bold; text-decoration: underline;">this</span>.deleteField.value,10);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.deleteField.value = <span style="font-style: italic;">""</span>;
                <span style="font-weight: bold; text-decoration: underline;">this</span>.implementAction(<span style="font-weight: bold; text-decoration: underline;">this</span>.deleteElement.bind(<span style="font-weight: bold; text-decoration: underline;">this</span>),deletedValue);               
        }
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org69db04e" class="outline-3">
<h3 id="org69db04e"><span class="section-number-3">1.10</span> Function is called whenever a click on the Clear button is made on the UI.</h3>
<div class="outline-text-3" id="text-1-10">
<p>
+Like other callback function the actual clear operation does not happen here. Instead we call the implementAction function. 
</p>

<p>
+The implementAction function then makes a call to the clearTree function which it receives as arguments and this function actually performs the clear operation on the tree. The clear operation basically resets all the parameters of the data structure to their initial values.
</p>

<div class="org-src-container">
<pre class="src src-js" id="org7823c11">TwoThreeTree.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.clearCallback = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">event</span>)
{
        <span style="font-weight: bold; text-decoration: underline;">this</span>.implementAction(<span style="font-weight: bold; text-decoration: underline;">this</span>.clearTree.bind(<span style="font-weight: bold; text-decoration: underline;">this</span>), <span style="font-style: italic;">""</span>);
}               
</pre>
</div>
</div>
</div>

<div id="outline-container-org0a52f43" class="outline-3">
<h3 id="org0a52f43"><span class="section-number-3">1.11</span> Function is called when the print functionality of the tree is invoked.</h3>
<div class="outline-text-3" id="text-1-11">
<p>
+This function makes a call to the implementAction function and does not directly implement the print functionality. Like any other callback function which we have defined here, a printTree function is passed as an argument to implementAction. 
</p>

<p>
+This function then performs the actual printing of the nodes. The printing of nodes is done in a level order.
</p>

<div class="org-src-container">
<pre class="src src-js" id="orge0e1268">TwoThreeTree.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.printCallback = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">event</span>) 
{
        <span style="font-weight: bold; text-decoration: underline;">this</span>.implementAction(<span style="font-weight: bold; text-decoration: underline;">this</span>.printTree.bind(<span style="font-weight: bold; text-decoration: underline;">this</span>),<span style="font-style: italic;">""</span>);                                             
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org0ca797e" class="outline-3">
<h3 id="org0ca797e"><span class="section-number-3">1.12</span> Function prints the tree nodes, essentially performs a traversal on the tree.</h3>
<div class="outline-text-3" id="text-1-12">
<p>
+This is the function that actually performs the printing of nodes in the tree. 
</p>

<p>
+Since, a tree by definition is a recursive data structure we need to have a recursive function which traverses the tree in a level order and prints the element, printTreeRec is such a recursive function being called from here.
</p>

<div class="org-src-container">
<pre class="src src-js" id="org19b58ec">TwoThreeTree.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.printTree = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">unused</span>)
{
        <span style="font-weight: bold; text-decoration: underline;">this</span>.commands = <span style="font-weight: bold;">new</span> <span style="font-weight: bold; text-decoration: underline;">Array</span>();
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.messageID, <span style="font-style: italic;">"Printing tree"</span>);
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">firstLabel</span> = <span style="font-weight: bold; text-decoration: underline;">this</span>.nextIndex;
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.xPosOfNextLabel = FIRST_PRINT_POS_X;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.yPosOfNextLabel = <span style="font-weight: bold; text-decoration: underline;">this</span>.first_print_pos_y;
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.printTreeRec(<span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
        <span style="font-weight: bold;">for</span> (<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">i</span> = firstLabel; i &lt; <span style="font-weight: bold; text-decoration: underline;">this</span>.nextIndex; i++)
        {
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Delete"</span>, i);
        }
        <span style="font-weight: bold; text-decoration: underline;">this</span>.nextIndex = firstLabel;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.messageID, <span style="font-style: italic;">""</span>);
        <span style="font-weight: bold;">return</span> <span style="font-weight: bold; text-decoration: underline;">this</span>.commands;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd2160b5" class="outline-3">
<h3 id="orgd2160b5"><span class="section-number-3">1.13</span> Function prints the tree in a recursive order.</h3>
<div class="outline-text-3" id="text-1-13">
<p>
+The tree by definition is a recursive data structure. The print operation given here prints the tree in a recursive order. The function starts from the root of the tree and print all the keys in the root, since the node in a 23 tree is not a simple node, our function has to print all the keys in the node, this is given by numKeys. 
</p>

<p>
+The function then moves on to the next next level starting from the left most child of the root. Again, in a 23 tree, there is a left middle and right subtree, so the function goes to each of the subtree starting from left and prints the value of all the keys in the node at each level.
</p>

<div class="org-src-container">
<pre class="src src-js" id="org1d57f98">TwoThreeTree.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.printTreeRec =<span style="font-weight: bold;">function</span> (<span style="font-weight: bold; font-style: italic;">tree</span>)
{
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetHighlight"</span>, tree.graphicID, 1);
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">nextLabelID</span>;
        <span style="font-weight: bold;">if</span> (tree.isLeaf)
        {
                <span style="font-weight: bold;">for</span> (<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">i</span> = 0; i &lt; tree.numKeys;i++)
                {
                        nextLabelID = <span style="font-weight: bold; text-decoration: underline;">this</span>.nextIndex++;
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"CreateLabel"</span>, nextLabelID, tree.keys[i], <span style="font-weight: bold; text-decoration: underline;">this</span>.getLabelX(tree, i), tree.y);
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetForegroundColor"</span>, nextLabelID, PRINT_COLOR);
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Move"</span>, nextLabelID, <span style="font-weight: bold; text-decoration: underline;">this</span>.xPosOfNextLabel, <span style="font-weight: bold; text-decoration: underline;">this</span>.yPosOfNextLabel);
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);                       
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.xPosOfNextLabel +=  PRINT_HORIZONTAL_GAP;
                        <span style="font-weight: bold;">if</span> (<span style="font-weight: bold; text-decoration: underline;">this</span>.xPosOfNextLabel &gt; PRINT_MAX)
                        {
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.xPosOfNextLabel = FIRST_PRINT_POS_X;
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.yPosOfNextLabel += PRINT_VERTICAL_GAP;
                        }
                }
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetHighlight"</span>, tree.graphicID, 0);
        }
        <span style="font-weight: bold;">else</span>
        {
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetEdgeHighlight"</span>, tree.graphicID, tree.children[0].graphicID, 1);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetHighlight"</span>, tree.graphicID, 0);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetEdgeHighlight"</span>, tree.graphicID, tree.children[0].graphicID, 0);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.printTreeRec(tree.children[0]);
                <span style="font-weight: bold;">for</span> (i = 0; i &lt; tree.numKeys; i++)
                {
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetHighlight"</span>, tree.graphicID, 1);
                        nextLabelID = <span style="font-weight: bold; text-decoration: underline;">this</span>.nextIndex++;
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"CreateLabel"</span>, nextLabelID, tree.keys[i], <span style="font-weight: bold; text-decoration: underline;">this</span>.getLabelX(tree, i), tree.y);
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetForegroundColor"</span>, nextLabelID, PRINT_COLOR);
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Move"</span>, nextLabelID, <span style="font-weight: bold; text-decoration: underline;">this</span>.xPosOfNextLabel, <span style="font-weight: bold; text-decoration: underline;">this</span>.yPosOfNextLabel);
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);                       
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.xPosOfNextLabel +=  PRINT_HORIZONTAL_GAP;
                        <span style="font-weight: bold;">if</span> (<span style="font-weight: bold; text-decoration: underline;">this</span>.xPosOfNextLabel &gt; PRINT_MAX)
                        {
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.xPosOfNextLabel = FIRST_PRINT_POS_X;
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.yPosOfNextLabel += PRINT_VERTICAL_GAP;
                        }
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetEdgeHighlight"</span>, tree.graphicID, tree.children[i+1].graphicID, 1);
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetHighlight"</span>, tree.graphicID, 0);
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetEdgeHighlight"</span>, tree.graphicID, tree.children[i+1].graphicID, 0);
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.printTreeRec(tree.children[i+1]);
                }
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetHighlight"</span>, tree.graphicID, 1);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetHighlight"</span>, tree.graphicID, 0);
                
        }
        
        
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org175b882" class="outline-3">
<h3 id="org175b882"><span class="section-number-3">1.14</span> Function to clear the tree and delete all its nodes, makes an internal call to deleteTree.</h3>
<div class="outline-text-3" id="text-1-14">
<p>
+This is the function that performs the actual clear operation on the tree. The clear operation is meant to delete all the values in the tree starting from the root. 
</p>

<p>
+This function then makes a call to the deleteTree function passing the root of the tree as parameter. The delete tree function will then recursively delete the tree.
</p>

<div class="org-src-container">
<pre class="src src-js" id="org5762159">TwoThreeTree.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.clearTree = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">ignored</span>)
{
        <span style="font-weight: bold; text-decoration: underline;">this</span>.commands = <span style="font-weight: bold;">new</span> <span style="font-weight: bold; text-decoration: underline;">Array</span>();
        <span style="font-weight: bold; text-decoration: underline;">this</span>.deleteTree(<span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot = <span style="font-weight: bold; text-decoration: underline;">null</span>;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.nextIndex = 3;             
        <span style="font-weight: bold;">return</span> <span style="font-weight: bold; text-decoration: underline;">this</span>.commands;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcb62fe9" class="outline-3">
<h3 id="orgcb62fe9"><span class="section-number-3">1.15</span> Function called from clear tree functionality and is responsible for delteting all the elements in the tree.</h3>
<div class="outline-text-3" id="text-1-15">
<p>
+Since tree is a recursive data structure so for deleting the tree we have to first traverse the tree starting from its root and go till the last level. 
</p>

<p>
+Once we have reached the last level in the tree, we are left with just the leaves. Note that the nodes in 23 tree can contain more than one values, so, after we have reached the leaf node, we iterate over all the values stored in it. This is given by the numKey attribute of the tree. Then, we keep recursively following this procedure until we have deleted the root of the tree.
</p>

<div class="org-src-container">
<pre class="src src-js" id="org8bcf0ef">TwoThreeTree.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.deleteTree = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">tree</span>)
{
        <span style="font-weight: bold;">if</span> (tree != <span style="font-weight: bold; text-decoration: underline;">null</span>)
        {
                <span style="font-weight: bold;">if</span> (!tree.isLeaf)
                {
                        <span style="font-weight: bold;">for</span> (<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">i</span> = 0; i &lt;= tree.numKeys; i++)
                        {
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Disconnect"</span>, tree.graphicID, tree.children[i].graphicID);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.deleteTree(tree.children[i]);
                                tree.children[i] == <span style="font-weight: bold; text-decoration: underline;">null</span>;
                        }
                }
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Delete"</span>, tree.graphicID);
        }
}

</pre>
</div>
</div>
</div>

<div id="outline-container-orge337bf3" class="outline-3">
<h3 id="orge337bf3"><span class="section-number-3">1.16</span> Function called when a find/search operation is performed on the tree.</h3>
<div class="outline-text-3" id="text-1-16">
<p>
+The find callback function is called when we perform a find operation on the 23 tree. Like other callback functions that we have defined here the actual find operation does not happen here. 
</p>

<p>
+We make a call to the implementAction function and pass it two parameters, one is the function which performs the actual find and the other is the argument to the function, which is the key we need to find in the tree.
</p>

<div class="org-src-container">
<pre class="src src-js" id="org5e67c7c">TwoThreeTree.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.findCallback = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">event</span>)
{
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">findValue</span>;
        findValue = <span style="font-weight: bold; text-decoration: underline;">this</span>.normalizeNumber(<span style="font-weight: bold; text-decoration: underline;">this</span>.findField.value, 4);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.findField.value = <span style="font-style: italic;">""</span>;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.implementAction(<span style="font-weight: bold; text-decoration: underline;">this</span>.findElement.bind(<span style="font-weight: bold; text-decoration: underline;">this</span>),findValue);                                            
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgea9b5fe" class="outline-3">
<h3 id="orgea9b5fe"><span class="section-number-3">1.17</span> Function performs the find functionality on the tree, receives the element to be searched in the arguments.</h3>
<div class="outline-text-3" id="text-1-17">
<p>
+This is the function that actually performs the find operation in the tree. Since a tree is a recursive data structure, we need to recursively traverse the tree in order to find any key in it. 
</p>

<p>
+Moreover, the nodes of a 23 tree can contain more than one key, as a result it is not enough to just visit the node but we need to iterate overall the keys in the node. This function thus, makes a call to the findInTree function which is a recursive function. It also sets the message on the screen which reinforces the knowlege of finding an element on the user.
</p>

<div class="org-src-container">
<pre class="src src-js" id="org8828b54">TwoThreeTree.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.findElement = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">findValue</span>)
{
        <span style="font-weight: bold; text-decoration: underline;">this</span>.commands = <span style="font-weight: bold;">new</span> <span style="font-weight: bold; text-decoration: underline;">Array</span>();
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.messageID, <span style="font-style: italic;">"Finding "</span> + findValue);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.findInTree(<span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot, findValue);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.messageID, <span style="font-style: italic;">""</span>);
        <span style="font-weight: bold;">return</span> <span style="font-weight: bold; text-decoration: underline;">this</span>.commands;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org933976e" class="outline-3">
<h3 id="org933976e"><span class="section-number-3">1.18</span> Function performs the actual find operation. Called from findElement.</h3>
<div class="outline-text-3" id="text-1-18">
<p>
+This function performs the actual find operation on the tree. It takes the tree and the value to be searched as arguments and then recusively traverses the tree to find that value. The nodes of a 23 tree can contain more than one key, as a result it is not enough to just visit the node but we need to iterate overall the keys in the node. So, this function iterates over each node in the tree from top to bottom level by level. This is important because the delete in a tree starts from the leaf nodes. 
</p>

<p>
+However, the search operation in the tree starts from the root and goes to the leaves. If the value is not found an appropriate error message is displayed.
</p>

<p>
+This function also sets the appropriate animation as it goes on searching each node in the tree. The node to be searched is first highlighted and then values in the nodes are matched against the search query. If the value is found it is again highlighted within the 23 tree node, before ending the find operation. This behaviour of the animation is also set here.
</p>

<div class="org-src-container">
<pre class="src src-js" id="org698cf7e">TwoThreeTree.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.findInTree = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">tree</span>, <span style="font-weight: bold; font-style: italic;">val</span>)
{
        <span style="font-weight: bold;">if</span> (tree != <span style="font-weight: bold; text-decoration: underline;">null</span>)
        {
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetHighlight"</span>, tree.graphicID, 1);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">i</span>;
                <span style="font-weight: bold;">for</span> (i = 0; i &lt; tree.numKeys &amp;&amp; tree.keys[i] &lt; val; i++);
                <span style="font-weight: bold;">if</span> (i == tree.numKeys)
                {
                        <span style="font-weight: bold;">if</span> (!tree.isLeaf)
                        {
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetEdgeHighlight"</span>, tree.graphicID, tree.children[tree.numKeys].graphicID, 1);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetHighlight"</span>, tree.graphicID, 0);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetEdgeHighlight"</span>, tree.graphicID, tree.children[tree.numKeys].graphicID, 0);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.findInTree(tree.children[tree.numKeys], val);
                        }
                        <span style="font-weight: bold;">else</span>
                        {
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetHighlight"</span>, tree.graphicID, 0);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.messageID, <span style="font-style: italic;">"Element "</span> + val + <span style="font-style: italic;">" is not in the tree"</span>);
                        }
                }
                <span style="font-weight: bold;">else</span> <span style="font-weight: bold;">if</span> (tree.keys[i] &gt; val)
                {
                        <span style="font-weight: bold;">if</span> (!tree.isLeaf)
                        {
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetEdgeHighlight"</span>, tree.graphicID, tree.children[i].graphicID, 1);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetHighlight"</span>, tree.graphicID, 0);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetEdgeHighlight"</span>, tree.graphicID, tree.children[i].graphicID, 0);                                    
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.findInTree(tree.children[i], val);
                        }
                        <span style="font-weight: bold;">else</span>
                        {
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetHighlight"</span>, tree.graphicID, 0);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.messageID, <span style="font-style: italic;">"Element "</span> + val + <span style="font-style: italic;">" is not in the tree"</span>);
                        }
                }
                <span style="font-weight: bold;">else</span>
                {
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetTextColor"</span>, tree.graphicID, <span style="font-style: italic;">"#FF0000"</span>, i);
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.messageID, <span style="font-style: italic;">"Element "</span> + val + <span style="font-style: italic;">" found"</span>);
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetTextColor"</span>, tree.graphicID, FOREGROUND_COLOR, i);
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetHighlight"</span>, tree.graphicID, 0);
                        
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                }
        }
        <span style="font-weight: bold;">else</span>
        {
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.messageID, <span style="font-style: italic;">"Element "</span> + val + <span style="font-style: italic;">" is not in the tree"</span>);
        }
}


</pre>
</div>
</div>
</div>

<div id="outline-container-orgb059c02" class="outline-3">
<h3 id="orgb059c02"><span class="section-number-3">1.19</span> Function performs the insert operation on the tree and receives the value to be inserted as its arguments.</h3>
<div class="outline-text-3" id="text-1-19">
<p>
+This function performs the insert operation in the 23 tree. While performing insert in a 23 tree there are two cases that arise. The first case is when they key to be inserted into the tree falls into a node which is not already full. In this case, we can simply insert the key into the node and end our insert operation. 
</p>

<p>
+This is done here by calling the insertNotfull function, which basically just adds the key to the node as there is still space.
</p>

<p>
+There is a second case where the key to be inserted falls into a node which is already full, this causes a violation in the 23 tree property and we need to fix this. This done by calling the insert function to first insert the vaue into the tree node and then calling split function to restore the tree property.
</p>

<div class="org-src-container">
<pre class="src src-js" id="org4db7685">TwoThreeTree.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.insertElement = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">insertedValue</span>)
{
        <span style="font-weight: bold; text-decoration: underline;">this</span>.commands = <span style="font-weight: bold;">new</span> <span style="font-weight: bold; text-decoration: underline;">Array</span>();
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.messageID, <span style="font-style: italic;">"Inserting "</span> + insertedValue);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
        
        <span style="font-weight: bold;">if</span> (<span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot == <span style="font-weight: bold; text-decoration: underline;">null</span>)
        {
                <span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot = <span style="font-weight: bold;">new</span> <span style="font-weight: bold; text-decoration: underline;">TwoThreeTreeNode</span>(<span style="font-weight: bold; text-decoration: underline;">this</span>.nextIndex++, <span style="font-weight: bold; text-decoration: underline;">this</span>.starting_x, STARTING_Y);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"CreateBTreeNode"</span>,
                                 <span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot.graphicID, 
                                 WIDTH_PER_ELEM, NODE_HEIGHT, 
                                 1, 
                                 <span style="font-weight: bold; text-decoration: underline;">this</span>.starting_x, 
                                 STARTING_Y, 
                                 BACKGROUND_COLOR,  
                                 FOREGROUND_COLOR);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot.keys[0] = insertedValue;
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot.graphicID, insertedValue, 0);
        }
        <span style="font-weight: bold;">else</span>
        {
                
                <span style="font-weight: bold; text-decoration: underline;">this</span>.insert(<span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot, insertedValue);                                      
                
                <span style="font-weight: bold;">if</span> (!<span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot.isLeaf)
                {
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.resizeTree();
                }
        }
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.messageID, <span style="font-style: italic;">""</span>);
        
        <span style="font-weight: bold;">return</span> <span style="font-weight: bold; text-decoration: underline;">this</span>.commands;
        
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf951502" class="outline-3">
<h3 id="orgf951502"><span class="section-number-3">1.20</span> Function for displaying error message on the screen.</h3>
<div class="outline-text-3" id="text-1-20">
<p>
+While inserting values into the 23 tree it is possible for the user to insert values which as non-numneric. Our current data structure only supports numeric values. This function is called before the value to be inserted is actually inserted into the tree. 
</p>

<p>
+It checks if value inserted is numeric or not. If it is, the value is allowed to be inserted into the else an error message is given to the user.
</p>

<div class="org-src-container">
<pre class="src src-js" id="org18364f9">TwoThreeTree.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.valueErrorMessage = <span style="font-weight: bold;">function</span>(){
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.messageID, <span style="font-style: italic;">"Enter a numeric value."</span>);
        <span style="font-weight: bold;">return</span> <span style="font-weight: bold; text-decoration: underline;">this</span>.commands;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org178310b" class="outline-3">
<h3 id="org178310b"><span class="section-number-3">1.21</span> Function is called to perform the actual insert operation in the in memory tree DS. This takes in an argument to be inserted into the tree.</h3>
<div class="outline-text-3" id="text-1-21">
<p>
+The insert function here first updates the number of values into the trees and sets up the steps which are
involved in the animation. 
</p>

<p>
+These steps will cause the animation to render on the screen. This is done with the help of cmd functionn. It then, makes a call to insertRepair and passes the tree as argument, which then handles the condition like node splitting.
</p>

<div class="org-src-container">
<pre class="src src-js" id="orgc259988">TwoThreeTree.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.insert = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">tree</span>, <span style="font-weight: bold; font-style: italic;">insertValue</span>)
{
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetHighlight"</span>, tree.graphicID, 1);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
        <span style="font-weight: bold;">if</span> (tree.isLeaf)
        {
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.messageID, <span style="font-style: italic;">"Inserting "</span> + insertValue + <span style="font-style: italic;">".  Inserting into a leaf"</span>);
                tree.numKeys++;
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetNumElements"</span>, tree.graphicID, tree.numKeys);
                <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">insertIndex</span> = tree.numKeys - 1;
                <span style="font-weight: bold;">while</span> (insertIndex &gt; 0 &amp;&amp; tree.keys[insertIndex - 1] &gt; insertValue)
                {
                        tree.keys[insertIndex] = tree.keys[insertIndex - 1];
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, tree.graphicID, tree.keys[insertIndex], insertIndex);
                        insertIndex--;
                }
                tree.keys[insertIndex] = insertValue;
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, tree.graphicID, tree.keys[insertIndex], insertIndex);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetHighlight"</span>, tree.graphicID, 0);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.resizeTree();
                <span style="font-weight: bold; text-decoration: underline;">this</span>.insertRepair(tree);
        }
        <span style="font-weight: bold;">else</span>
        {
                <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">findIndex</span> = 0;
                <span style="font-weight: bold;">while</span> (findIndex &lt; tree.numKeys &amp;&amp; tree.keys[findIndex] &lt; insertValue)
                {
                        findIndex++;                                    
                }                               
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetEdgeHighlight"</span>, tree.graphicID, tree.children[findIndex].graphicID, 1);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetEdgeHighlight"</span>, tree.graphicID, tree.children[findIndex].graphicID, 0);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetHighlight"</span>, tree.graphicID, 0);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.insert(tree.children[findIndex], insertValue);                             
        }
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfc6cfff" class="outline-3">
<h3 id="orgfc6cfff"><span class="section-number-3">1.22</span> Function handles the case when an insertion into the tree node violates the propery and internally calls split</h3>
<div class="outline-text-3" id="text-1-22">
<p>
+After the insert function has set the animation to be rendered on the screen, a call to insertRepair is made, this is checks if there is a violation in the 23 tree property after an insert has been made. If there is a violation of the 23 tree property, that is, the node after insertion is neither a two node nor a three node, it calls for a split. 
</p>

<p>
+The split function restores the 23 tree property by splitting the full node. The repair function then repairs the tree by creating adding the middle key to the parent node and creating the new children after the split operation has taken place.
</p>

<div class="org-src-container">
<pre class="src src-js" id="orgc5e0aa2">TwoThreeTree.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.insertRepair = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">tree</span>) 
{
        <span style="font-weight: bold;">if</span> (tree.numKeys &lt;= <span style="font-weight: bold; text-decoration: underline;">this</span>.max_keys)
        {
                <span style="font-weight: bold;">return</span>;
        }
        <span style="font-weight: bold;">else</span> <span style="font-weight: bold;">if</span> (tree.parent == <span style="font-weight: bold; text-decoration: underline;">null</span>)
        {
                <span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot = <span style="font-weight: bold; text-decoration: underline;">this</span>.split(tree);
                <span style="font-weight: bold;">return</span>;
        }
        <span style="font-weight: bold;">else</span>
        {
                <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">newNode</span>  = <span style="font-weight: bold; text-decoration: underline;">this</span>.split(tree);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.insertRepair(newNode);
        }                       
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org2ee7e46" class="outline-3">
<h3 id="org2ee7e46"><span class="section-number-3">1.23</span> Function performs the split operation on the nodes when insertion has caused a violation 23 tree property</h3>
<div class="outline-text-3" id="text-1-23">
<p>
+The split function first takes in a tree and performs a check if the parent of the tree is null or not, this is because it is being called from insertRepair which is a recursive function and it is possible that during this recursion the tree parent is null. 
</p>

<p>
+After this check has been performed, the function proceedes with the actual split operation. First the animation commands are used to perform the animation on the screen, this involves setting up new texts to aid the split. 
</p>

<p>
+Then, a disconnect command is issued, this command takes a parent and child and disconnects the parent from the child, this results in splitting. The splitted value is then moveed to the parent node of the tree. This node is then again checked for any violation in the 23 property in the insertRepair function.
</p>

<div class="org-src-container">
<pre class="src src-js" id="org0bdf439">TwoThreeTree.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.split = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">tree</span>)
{
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.messageID, <span style="font-style: italic;">"Node now contains too many keys. Splitting!"</span>);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetHighlight"</span>, tree.graphicID, 1);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetHighlight"</span>, tree.graphicID, 0);
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">rightNode</span> = <span style="font-weight: bold;">new</span> <span style="font-weight: bold; text-decoration: underline;">TwoThreeTreeNode</span>(<span style="font-weight: bold; text-decoration: underline;">this</span>.nextIndex++, tree.x + 100, tree.y);
        rightNode.numKeys = tree.numKeys - <span style="font-weight: bold; text-decoration: underline;">this</span>.split_index - 1;
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">risingNode</span> = tree.keys[<span style="font-weight: bold; text-decoration: underline;">this</span>.split_index];
        
        
        <span style="font-weight: bold;">if</span> (tree.parent != <span style="font-weight: bold; text-decoration: underline;">null</span>)
        {
                <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">currentParent</span> = tree.parent;
                <span style="font-weight: bold;">for</span> (<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">parentIndex</span> = 0; parentIndex &lt; currentParent.numKeys + 1 &amp;&amp; currentParent.children[parentIndex] != tree; parentIndex++);
                <span style="font-weight: bold;">if</span> (parentIndex == currentParent.numKeys + 1)
                {
                        <span style="font-weight: bold;">throw</span> <span style="font-weight: bold;">new</span> <span style="font-weight: bold; text-decoration: underline;">Error</span>(<span style="font-style: italic;">"Couldn't find which child we were!"</span>);
                }
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetNumElements"</span>, currentParent.graphicID, currentParent.numKeys + 1);
                <span style="font-weight: bold;">for</span> (i = currentParent.numKeys; i &gt; parentIndex; i--)
                {
                        currentParent.children[i+1] = currentParent.children[i];
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Disconnect"</span>, currentParent.graphicID, currentParent.children[i].graphicID);
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Connect"</span>, currentParent.graphicID,  currentParent.children[i].graphicID, FOREGROUND_COLOR, 
                                0, <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">Curve</span>
                                0, <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">Directed</span>
                                <span style="font-style: italic;">""</span>, <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">Label</span>
                                i+1);
                        
                        currentParent.keys[i] = currentParent.keys[i-1];
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, currentParent.graphicID, currentParent.keys[i] ,i);
                }
                currentParent.numKeys++;
                currentParent.keys[parentIndex] = risingNode;
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, currentParent.graphicID, <span style="font-style: italic;">""</span>, parentIndex);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.moveLabel1ID = <span style="font-weight: bold; text-decoration: underline;">this</span>.nextIndex++;
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"CreateLabel"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.moveLabel1ID, risingNode, <span style="font-weight: bold; text-decoration: underline;">this</span>.getLabelX(tree, <span style="font-weight: bold; text-decoration: underline;">this</span>.split_index),  tree.y)
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetForegroundColor"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.moveLabel1ID, FOREGROUND_COLOR);

                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Move"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.moveLabel1ID,  <span style="font-weight: bold; text-decoration: underline;">this</span>.getLabelX(currentParent, parentIndex),  currentParent.y)      
                currentParent.children[parentIndex+1] = rightNode;
                rightNode.parent = currentParent;
                
        }
        
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"CreateBTreeNode"</span>,
                          rightNode.graphicID, 
                          WIDTH_PER_ELEM, NODE_HEIGHT, 
                          tree.numKeys - <span style="font-weight: bold; text-decoration: underline;">this</span>.split_index - 1, 
                          tree.x, 
                          tree.y,  
                          BACKGROUND_COLOR, 
                          FOREGROUND_COLOR);
        
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">i</span>;
        <span style="font-weight: bold;">for</span> (i = <span style="font-weight: bold; text-decoration: underline;">this</span>.split_index + 1; i &lt; tree.numKeys + 1; i++)
        {
                rightNode.children[i - <span style="font-weight: bold; text-decoration: underline;">this</span>.split_index - 1] = tree.children[i];
                <span style="font-weight: bold;">if</span> (tree.children[i] != <span style="font-weight: bold; text-decoration: underline;">null</span>)
                {
                        rightNode.isLeaf = <span style="font-weight: bold; text-decoration: underline;">false</span>;
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Disconnect"</span>, tree.graphicID, tree.children[i].graphicID);
                        
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Connect"</span>, rightNode.graphicID, 
                                rightNode.children[i - <span style="font-weight: bold; text-decoration: underline;">this</span>.split_index - 1].graphicID,
                                FOREGROUND_COLOR,
                                0, <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">Curve</span>
                                0, <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">Directed</span>
                                <span style="font-style: italic;">""</span>, <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">Label</span>
                                i - <span style="font-weight: bold; text-decoration: underline;">this</span>.split_index - 1);
                        <span style="font-weight: bold;">if</span> (tree.children[i] != <span style="font-weight: bold; text-decoration: underline;">null</span>)
                        {
                                tree.children[i].parent = rightNode;
                        }
                        tree.children[i] = <span style="font-weight: bold; text-decoration: underline;">null</span>;
                        
                }
        }
        <span style="font-weight: bold;">for</span> (i = <span style="font-weight: bold; text-decoration: underline;">this</span>.split_index+1; i &lt; tree.numKeys; i++)
        {
                rightNode.keys[i - <span style="font-weight: bold; text-decoration: underline;">this</span>.split_index - 1] = tree.keys[i];
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, rightNode.graphicID, rightNode.keys[i - <span style="font-weight: bold; text-decoration: underline;">this</span>.split_index - 1], i - <span style="font-weight: bold; text-decoration: underline;">this</span>.split_index - 1);
        }
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">leftNode</span> = tree;
        leftNode.numKeys = <span style="font-weight: bold; text-decoration: underline;">this</span>.split_index;
        
        <span style="font-weight: bold;">for</span> (i = <span style="font-weight: bold; text-decoration: underline;">this</span>.split_index; i &lt; tree.numKeys; i++)
        {
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, tree.graphicID, <span style="font-style: italic;">""</span>, i); 
        }
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetNumElements"</span>, tree.graphicID, <span style="font-weight: bold; text-decoration: underline;">this</span>.split_index);
        
        <span style="font-weight: bold;">if</span> (tree.parent != <span style="font-weight: bold; text-decoration: underline;">null</span>)
        {
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Connect"</span>, currentParent.graphicID, rightNode.graphicID, FOREGROUND_COLOR, 
                        0, <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">Curve</span>
                        0, <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">Directed</span>
                        <span style="font-style: italic;">""</span>, <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">Label</span>
                        parentIndex + 1);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.resizeTree();
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>)
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Delete"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.moveLabel1ID);                          
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, currentParent.graphicID, risingNode, parentIndex);
                <span style="font-weight: bold;">return</span> tree.parent;
        }
        <span style="font-weight: bold;">else</span>
        {
                <span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot = <span style="font-weight: bold;">new</span> <span style="font-weight: bold; text-decoration: underline;">TwoThreeTreeNode</span>(<span style="font-weight: bold; text-decoration: underline;">this</span>.nextIndex++, <span style="font-weight: bold; text-decoration: underline;">this</span>.starting_x, STARTING_Y);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"CreateBTreeNode"</span>,
                                 <span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot.graphicID, 
                                 WIDTH_PER_ELEM, 
                                 NODE_HEIGHT, 
                                 1, 
                                 <span style="font-weight: bold; text-decoration: underline;">this</span>.starting_x, 
                                 STARTING_Y,
                                 BACKGROUND_COLOR,  
                                 FOREGROUND_COLOR);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot.keys[0] = risingNode;
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot.graphicID, risingNode, 0);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot.children[0] = leftNode;
                <span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot.children[1] = rightNode;
                leftNode.parent = <span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot;
                rightNode.parent = <span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot;
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Connect"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot.graphicID, leftNode.graphicID, FOREGROUND_COLOR, 
                        0, <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">Curve</span>
                        0, <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">Directed</span>
                        <span style="font-style: italic;">""</span>, <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">Label</span>
                        0);     <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">Connection Point</span>
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Connect"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot.graphicID, rightNode.graphicID, FOREGROUND_COLOR, 
                        0, <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">Curve</span>
                        0, <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">Directed</span>
                        <span style="font-style: italic;">""</span>, <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">Label</span>
                        1); <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">Connection Point</span>
                <span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot.isLeaf = <span style="font-weight: bold; text-decoration: underline;">false</span>;
                <span style="font-weight: bold;">return</span> <span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot;
        }
        
        
        
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org4dc7f28" class="outline-3">
<h3 id="org4dc7f28"><span class="section-number-3">1.24</span> Function is called when a delete operation is performed on the tree. Takes in the value to be deleted as argument.</h3>
<div class="outline-text-3" id="text-1-24">
<p>
+This function performs the actual delete operation in the tree. It frist sets a message on the screen telling the user of the value that we are going to delete from the tree. This step by step animation is done with the help of cmd function. Now, deleting a value from the tree causes a violation in the 23 property thus we need to take care of these cases. 
</p>

<p>
+Delete operation is bit more complex than the insert operation in the tree as in case of a delete when the violation of the 23 property happens there are two ways to fix this, one is merge where we merge the keys from the neighbouring nodes in case of underflow and the other is re-distribute in which we redistribute the keys so as to store the 23 property. 
</p>

<p>
+This function makes a call to the doDelete function which performs the delete operation in the node and also restores the tree property. After the delete operation is successful we need to resize the tree as the number of keys in the tree are now less than they were before.
</p>

<div class="org-src-container">
<pre class="src src-js" id="org64096af">TwoThreeTree.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.deleteElement = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">deletedValue</span>)
{
        <span style="font-weight: bold; text-decoration: underline;">this</span>.commands = <span style="font-weight: bold;">new</span> <span style="font-weight: bold; text-decoration: underline;">Array</span>();
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">"Deleting "</span>+deletedValue);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">""</span>);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.highlightID = <span style="font-weight: bold; text-decoration: underline;">this</span>.nextIndex++;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">""</span>);
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.doDelete(<span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot, deletedValue);
                
        

        <span style="font-weight: bold;">if</span> (<span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot){

                <span style="font-weight: bold;">if</span> (<span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot.numKeys == 0)
                {
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Delete"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot.graphicID);
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot = <span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot.children[0];
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot.parent = <span style="font-weight: bold; text-decoration: underline;">null</span>;
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.resizeTree();
                }
        }
        <span style="font-weight: bold;">return</span> <span style="font-weight: bold; text-decoration: underline;">this</span>.commands;                                           
}
</pre>
</div>
</div>
</div>


<div id="outline-container-org6c7c472" class="outline-3">
<h3 id="org6c7c472"><span class="section-number-3">1.25</span> This function performs actual delete operation on the tree.</h3>
<div class="outline-text-3" id="text-1-25">
<p>
+This function performs the actual delete operation in the 23 tree. The delete operation in the tree is more complicated than the insert operation as in a deletion the violation is addressed using two different methods. In the first method we first check for the whether the deletion from the tree has caused any violation in the 23 tree property if it has we will look for neighbouring nodes and try to merge them together inorder to restore the property of the 23 tree. 
</p>

<p>
+In the second case when a merge is not possible we perform redistibution of the keys in the tree this redistribution is done by stealing keys from the neighbouring nodes/siblings.
</p>

<div class="org-src-container">
<pre class="src src-js" id="org8538cdf">TwoThreeTree.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.doDelete = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">tree</span>, <span style="font-weight: bold; font-style: italic;">val</span>)
{
        <span style="font-weight: bold;">if</span> (tree != <span style="font-weight: bold; text-decoration: underline;">null</span>)
        {
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetHighlight"</span>, tree.graphicID, 1);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">i</span>;
                <span style="font-weight: bold;">for</span> (i = 0; i &lt; tree.numKeys &amp;&amp; tree.keys[i] &lt; val; i++);
                <span style="font-weight: bold;">if</span> (i == tree.numKeys)
                {
                        <span style="font-weight: bold;">if</span> (!tree.isLeaf)
                        {
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetEdgeHighlight"</span>, tree.graphicID, tree.children[tree.numKeys].graphicID, 1);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetHighlight"</span>, tree.graphicID, 0);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetEdgeHighlight"</span>, tree.graphicID, tree.children[tree.numKeys].graphicID, 0);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.doDelete(tree.children[tree.numKeys], val);
                        }
                        <span style="font-weight: bold;">else</span>
                        {
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetHighlight"</span>, tree.graphicID, 0);
                        }
                }
                <span style="font-weight: bold;">else</span> <span style="font-weight: bold;">if</span> (tree.keys[i] &gt; val)
                {
                        <span style="font-weight: bold;">if</span> (!tree.isLeaf)
                        {
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetEdgeHighlight"</span>, tree.graphicID, tree.children[i].graphicID, 1);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetHighlight"</span>, tree.graphicID, 0);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetEdgeHighlight"</span>, tree.graphicID, tree.children[i].graphicID, 0);                                    
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.doDelete(tree.children[i], val);
                        }
                        <span style="font-weight: bold;">else</span>
                        {
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetHighlight"</span>, tree.graphicID, 0);
                        }
                }
                <span style="font-weight: bold;">else</span>
                {
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetTextColor"</span>, tree.graphicID, <span style="font-style: italic;">"#FF0000"</span>, i);
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                        <span style="font-weight: bold;">if</span> (tree.isLeaf)
                        {
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetTextColor"</span>, tree.graphicID, FOREGROUND_COLOR, i);
                                <span style="font-weight: bold;">for</span> (<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">j</span> = i; j &lt; tree.numKeys - 1; j++)
                                {
                                        tree.keys[j] = tree.keys[j+1];
                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, tree.graphicID, tree.keys[j], j);
                                }
                                tree.numKeys--;
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, tree.graphicID, <span style="font-style: italic;">""</span>, tree.numKeys);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetNumElements"</span>, tree.graphicID, tree.numKeys);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetHighlight"</span>, tree.graphicID, 0);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.repairAfterDelete(tree);
                        }
                        <span style="font-weight: bold;">else</span>
                        {
                                <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">maxNode</span> = tree.children[i];
                                <span style="font-weight: bold;">while</span> (!maxNode.isLeaf)
                                {
                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetHighlight"</span>, maxNode.graphicID, 1);
                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>)
                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetHighlight"</span>, maxNode.graphicID, 0);
                                        maxNode = maxNode.children[maxNode.numKeys];
                                }
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetHighlight"</span>, maxNode.graphicID, 1);
                                tree.keys[i] = maxNode.keys[maxNode.numKeys - 1];
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetTextColor"</span>, tree.graphicID, FOREGROUND_COLOR, i);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, tree.graphicID, <span style="font-style: italic;">""</span>, i);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, maxNode.graphicID, <span style="font-style: italic;">""</span>, maxNode.numKeys - 1);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"CreateLabel"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.moveLabel1ID, tree.keys[i], <span style="font-weight: bold; text-decoration: underline;">this</span>.getLabelX(maxNode, maxNode.numKeys - 1),  maxNode.y)
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Move"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.moveLabel1ID, <span style="font-weight: bold; text-decoration: underline;">this</span>.getLabelX(tree, i), tree.y);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Delete"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.moveLabel1ID);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, tree.graphicID, tree.keys[i], i);
                                maxNode.numKeys--;
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetHighlight"</span>, maxNode.graphicID, 0);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetHighlight"</span>, tree.graphicID, 0);
                                
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetNumElements"</span>, maxNode.graphicID, maxNode.numKeys);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.repairAfterDelete(maxNode);                                        
                        }
                }
                
        }
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org8c710ae" class="outline-3">
<h3 id="org8c710ae"><span class="section-number-3">1.26</span> Function performs merge operation on the tree keys after the delete operation violates the tree properties</h3>
<div class="outline-text-3" id="text-1-26">
<p>
+This function is called when the delete operation causes a violation in the 23 tree property and therefore requires fixing. In this function we restore the 23 property by merging the node from which the deletion has happened with the node immediately towards its right. This leads the the node from which the key was deleted to become either a 2 node or a 3 node. 
</p>

<p>
+This function is also responsible for animating the merge with right scenario and calls the cmd function to set appropriate animation on the screen. Here, we also prompt the user at each step in the animation with a message, which explains what is currently being done.
</p>

<div class="org-src-container">
<pre class="src src-js" id="org22ea47e">TwoThreeTree.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.mergeRight = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">tree</span>) 
{
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.messageID, <span style="font-style: italic;">"Merging node"</span>);
        
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">parentNode</span> = tree.parent;
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">parentIndex</span> = 0;
        <span style="font-weight: bold;">for</span> (parentIndex = 0; parentNode.children[parentIndex] != tree; parentIndex++);
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">rightSib</span> = parentNode.children[parentIndex+1];
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetHighlight"</span>, tree.graphicID, 1);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetHighlight"</span>, parentNode.graphicID, 1);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetHighlight"</span>, rightSib.graphicID, 1);
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetNumElements"</span>, tree.graphicID, tree.numKeys + rightSib.numKeys + 1);
        tree.x = (tree.x + rightSib.x) / 2
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetPosition"</span>, tree.graphicID, tree.x,  tree.y);
        
        tree.keys[tree.numKeys] = parentNode.keys[parentIndex];
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">fromParentIndex</span> = tree.numKeys;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, tree.graphicID, <span style="font-style: italic;">""</span>, tree.numKeys);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"CreateLabel"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.moveLabel1ID, parentNode.keys[parentIndex],  <span style="font-weight: bold; text-decoration: underline;">this</span>.getLabelX(parentNode, parentIndex),  parentNode.y);
        
        
        <span style="font-weight: bold;">for</span> (<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">i</span> = 0; i &lt; rightSib.numKeys; i++)
        {
                tree.keys[tree.numKeys + 1 + i] = rightSib.keys[i];
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, tree.graphicID, tree.keys[tree.numKeys + 1 + i], tree.numKeys + 1 + i);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, rightSib.graphicID, <span style="font-style: italic;">""</span>, i);
        }
        <span style="font-weight: bold;">if</span> (!tree.isLeaf)
        {
                <span style="font-weight: bold;">for</span> (i = 0; i &lt;= rightSib.numKeys; i++)
                {
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Disconnect"</span>, rightSib.graphicID, rightSib.children[i].graphicID);
                        tree.children[tree.numKeys + 1 + i] = rightSib.children[i];
                        tree.children[tree.numKeys + 1 + i].parent = tree;
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Connect"</span>, tree.graphicID, 
                                tree.children[tree.numKeys + 1 + i].graphicID,
                                FOREGROUND_COLOR,
                                0, <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">Curve</span>
                                0, <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">Directed</span>
                                <span style="font-style: italic;">""</span>, <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">Label</span>
                                tree.numKeys + 1 + i);
                }
        }
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Disconnect"</span>, parentNode.graphicID, rightSib.graphicID);
        <span style="font-weight: bold;">for</span> (i = parentIndex+1; i &lt; parentNode.numKeys; i++)
        {
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Disconnect"</span>, parentNode.graphicID, parentNode.children[i+1].graphicID);
                parentNode.children[i] = parentNode.children[i+1];
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Connect"</span>, parentNode.graphicID, 
                        parentNode.children[i].graphicID,
                        FOREGROUND_COLOR,
                        0, <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">Curve</span>
                        0, <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">Directed</span>
                        <span style="font-style: italic;">""</span>, <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">Label</span>
                        i);
                parentNode.keys[i-1] = parentNode.keys[i];
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, parentNode.graphicID, parentNode.keys[i-1], i-1);                                   
        }
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, parentNode.graphicID, <span style="font-style: italic;">""</span>, parentNode.numKeys - 1);
        parentNode.numKeys--;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetNumElements"</span>, parentNode.graphicID, parentNode.numKeys);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetHighlight"</span>, tree.graphicID, 0);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetHighlight"</span>, parentNode.graphicID, 0);

        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Delete"</span>, rightSib.graphicID);
        tree.numKeys = tree.numKeys + rightSib.numKeys + 1;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Move"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.moveLabel1ID, <span style="font-weight: bold; text-decoration: underline;">this</span>.getLabelX(tree, fromParentIndex), tree.y);
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Delete"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.moveLabel1ID);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, tree.graphicID, tree.keys[fromParentIndex], fromParentIndex);
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.messageID, <span style="font-style: italic;">""</span>);
        <span style="font-weight: bold;">return</span> tree;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org5638979" class="outline-3">
<h3 id="org5638979"><span class="section-number-3">1.27</span> Helper function to perform redistribution of keys in the tree node after the 23 tree property has been violated.</h3>
<div class="outline-text-3" id="text-1-27">
<p>
+This function represents the case where the deletion operation has caused a violation in the 23 tree property and so to fix it we perform redistribution of the keys, now this redistribution can be performed in various ways. One way as done here, is to steal some keys from the right sibling and store them in the node from which the deletion has occured. 
</p>

<p>
+This results in the overall property of the 23 tree being fixed and thus the deletion is successful.
</p>

<div class="org-src-container">
<pre class="src src-js" id="orgd45c40d">TwoThreeTree.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.stealFromRight = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">tree</span>, <span style="font-weight: bold; font-style: italic;">parentIndex</span>) 
{
        <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">Steal from right sibling</span>
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">parentNode</span> = tree.parent;
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetNumElements"</span>, tree.graphicID, tree.numKeys+1);                                     
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.messageID, <span style="font-style: italic;">"Stealing from right sibling"</span>);
        
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">rightSib</span> = parentNode.children[parentIndex + 1];
        tree.numKeys++;
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetNumElements"</span>, tree.graphicID, tree.numKeys);
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, tree.graphicID, <span style="font-style: italic;">""</span>,  tree.numKeys - 1);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, parentNode.graphicID, <span style="font-style: italic;">""</span>, parentIndex);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, rightSib.graphicID, <span style="font-style: italic;">""</span>, 0);

        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">tmpLabel1</span> = <span style="font-weight: bold; text-decoration: underline;">this</span>.nextIndex++;
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">tmpLabel2</span> = <span style="font-weight: bold; text-decoration: underline;">this</span>.nextIndex++;

        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"CreateLabel"</span>, tmpLabel1, rightSib.keys[0], <span style="font-weight: bold; text-decoration: underline;">this</span>.getLabelX(rightSib, 0),  rightSib.y)
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"CreateLabel"</span>, tmpLabel2, parentNode.keys[parentIndex], <span style="font-weight: bold; text-decoration: underline;">this</span>.getLabelX(parentNode, parentIndex),  parentNode.y)
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetForegroundColor"</span>, tmpLabel1, FOREGROUND_COLOR);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetForegroundColor"</span>, tmpLabel2, FOREGROUND_COLOR);
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Move"</span>, tmpLabel1, <span style="font-weight: bold; text-decoration: underline;">this</span>.getLabelX(parentNode, parentIndex),  parentNode.y);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Move"</span>, tmpLabel2, <span style="font-weight: bold; text-decoration: underline;">this</span>.getLabelX(tree, tree.numKeys - 1), tree.y);
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>)
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Delete"</span>, tmpLabel1);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Delete"</span>, tmpLabel2);
        tree.keys[tree.numKeys - 1] = parentNode.keys[parentIndex];
        parentNode.keys[parentIndex] = rightSib.keys[0];
        
        
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, tree.graphicID, tree.keys[tree.numKeys - 1], tree.numKeys - 1);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, parentNode.graphicID, parentNode.keys[parentIndex], parentIndex);
        <span style="font-weight: bold;">if</span> (!tree.isLeaf)
        {
                tree.children[tree.numKeys] = rightSib.children[0];
                tree.children[tree.numKeys].parent = tree;
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Disconnect"</span>, rightSib.graphicID, rightSib.children[0].graphicID);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Connect"</span>, tree.graphicID, 
                        tree.children[tree.numKeys].graphicID,
                        FOREGROUND_COLOR,
                        0, <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">Curve</span>
                        0, <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">Directed</span>
                        <span style="font-style: italic;">""</span>, <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">Label</span>
                        tree.numKeys);  
                
                <span style="font-weight: bold;">for</span> (<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">i</span> = 1; i &lt; rightSib.numKeys + 1; i++)
                {
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Disconnect"</span>, rightSib.graphicID, rightSib.children[i].graphicID);
                        rightSib.children[i-1] = rightSib.children[i];
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Connect"</span>, rightSib.graphicID, 
                                rightSib.children[i-1].graphicID,
                                FOREGROUND_COLOR,
                                0, <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">Curve</span>
                                0, <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">Directed</span>
                                <span style="font-style: italic;">""</span>, <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">Label</span>
                                i-1);                                                           
                }
                
        }
        <span style="font-weight: bold;">for</span> (i = 1; i &lt; rightSib.numKeys; i++)
        {
                rightSib.keys[i-1] = rightSib.keys[i];
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, rightSib.graphicID, rightSib.keys[i-1], i-1);
        }
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, rightSib.graphicID, <span style="font-style: italic;">""</span>, rightSib.numKeys-1);
        rightSib.numKeys--;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetNumElements"</span>, rightSib.graphicID, rightSib.numKeys);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.resizeTree();
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.messageID, <span style="font-style: italic;">""</span>);
        <span style="font-weight: bold;">return</span> tree;
        
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org5767832" class="outline-3">
<h3 id="org5767832"><span class="section-number-3">1.28</span> Helper function to perform the delete operation, it essentially performs a merge operation and renders correct message on UI</h3>
<div class="outline-text-3" id="text-1-28">
<p>
+This function represents the case where the deletion operation has caused a violation in the 23 tree property and so to fix it we perform redistribution of the keys, now this redistribution can be performed in various ways. One way as done here, is to steal some keys from the left sibling and store them in the node from which the deletion has occured. 
</p>

<p>
+This results in the overall property of the 23 tree being fixed and thus the deletion is successful.
</p>

<div class="org-src-container">
<pre class="src src-js" id="org39ea080">TwoThreeTree.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.stealFromLeft = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">tree</span>, <span style="font-weight: bold; font-style: italic;">parentIndex</span>) 
{
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">parentNode</span> = tree.parent;
        <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">Steal from left sibling</span>
        tree.numKeys++;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetNumElements"</span>, tree.graphicID, tree.numKeys);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.messageID, <span style="font-style: italic;">"Node has too few keys.  Stealing from left sibling."</span>);
        
        <span style="font-weight: bold;">for</span> (i = tree.numKeys - 1; i &gt; 0; i--)
        {
                tree.keys[i] = tree.keys[i-1];
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, tree.graphicID, tree.keys[i], i);
        }
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">leftSib</span> = parentNode.children[parentIndex -1];
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, tree.graphicID, <span style="font-style: italic;">""</span>, 0);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, parentNode.graphicID, <span style="font-style: italic;">""</span>, parentIndex - 1);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, leftSib.graphicID, <span style="font-style: italic;">""</span>, leftSib.numKeys - 1);
        
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">tmpLabel1</span> = <span style="font-weight: bold; text-decoration: underline;">this</span>.nextIndex++;
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">tmpLabel2</span> = <span style="font-weight: bold; text-decoration: underline;">this</span>.nextIndex++;
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"CreateLabel"</span>, tmpLabel1, leftSib.keys[leftSib.numKeys - 1], <span style="font-weight: bold; text-decoration: underline;">this</span>.getLabelX(leftSib, leftSib.numKeys - 1),  leftSib.y)
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"CreateLabel"</span>, tmpLabel2, parentNode.keys[parentIndex - 1], <span style="font-weight: bold; text-decoration: underline;">this</span>.getLabelX(parentNode, parentIndex - 1),  parentNode.y)
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetForegroundColor"</span>, tmpLabel1, FOREGROUND_COLOR);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetForegroundColor"</span>, tmpLabel2, FOREGROUND_COLOR);

        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Move"</span>, tmpLabel1, <span style="font-weight: bold; text-decoration: underline;">this</span>.getLabelX(parentNode, parentIndex - 1),  parentNode.y);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Move"</span>, tmpLabel2, <span style="font-weight: bold; text-decoration: underline;">this</span>.getLabelX(tree, 0), tree.y);
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>)
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Delete"</span>, tmpLabel1);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Delete"</span>, tmpLabel2);
        
        <span style="font-weight: bold;">if</span> (!tree.isLeaf)
        {
                <span style="font-weight: bold;">for</span> (<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">i</span> = tree.numKeys; i &gt; 0; i--)
                {
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Disconnect"</span>, tree.graphicID, tree.children[i-1].graphicID);
                        tree.children[i] =tree.children[i-1];
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Connect"</span>, tree.graphicID, 
                                tree.children[i].graphicID,
                                FOREGROUND_COLOR,
                                0, <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">Curve</span>
                                0, <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">Directed</span>
                                <span style="font-style: italic;">""</span>, <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">Label</span>
                                i);
                }
                tree.children[0] = leftSib.children[leftSib.numKeys];
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Disconnect"</span>, leftSib.graphicID, leftSib.children[leftSib.numKeys].graphicID);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Connect"</span>, tree.graphicID, 
                        tree.children[0].graphicID,
                        FOREGROUND_COLOR,
                        0, <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">Curve</span>
                        0, <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">Directed</span>
                        <span style="font-style: italic;">""</span>, <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">Label</span>
                        0);
                leftSib.children[leftSib.numKeys] = <span style="font-weight: bold; text-decoration: underline;">null</span>;
                tree.children[0].parent = tree;
                
        }
        
        tree.keys[0] = parentNode.keys[parentIndex - 1];
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, tree.graphicID, tree.keys[0], 0);                                           
        parentNode.keys[parentIndex-1] = leftSib.keys[leftSib.numKeys - 1];
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, parentNode.graphicID, parentNode.keys[parentIndex - 1], parentIndex - 1);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, leftSib.graphicID,<span style="font-style: italic;">""</span>, leftSib.numKeys - 1);
        
        leftSib.numKeys--;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetNumElements"</span>, leftSib.graphicID, leftSib.numKeys);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.resizeTree();
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.messageID, <span style="font-style: italic;">""</span>);
        <span style="font-weight: bold;">return</span> tree;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org793d1ba" class="outline-3">
<h3 id="org793d1ba"><span class="section-number-3">1.29</span> Function called to perform repair operation on the tree after a delete operation has violated the tree property</h3>
<div class="outline-text-3" id="text-1-29">
<p>
+The deletion of a key from the node of a 23 tree can cause violation the tree property. The deletion operation in the tree first searches for the key to be deleted and then performs a delete. After the delete has been done, the tree might not remain a 23 tree and thus requires some repair after the delete. This repair is also called restoring the 23 tree property.
</p>

<p>
+This restoration can be performed in two different ways. One is by merging the node from which the deletion has occured with its sibling and the other is called redistribution in which we steal the keys from either the left or the right sibling and put it in the node which has underflown. This function handles these two cases by calling the functions at approriate instances.
</p>

<div class="org-src-container">
<pre class="src src-js" id="org29800de">TwoThreeTree.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.repairAfterDelete = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">tree</span>)
{
        <span style="font-weight: bold;">if</span> (tree.numKeys &lt; <span style="font-weight: bold; text-decoration: underline;">this</span>.min_keys)
        {
                <span style="font-weight: bold;">if</span> (tree.parent == <span style="font-weight: bold; text-decoration: underline;">null</span>)
                {
                        <span style="font-weight: bold;">if</span> (tree.numKeys == 0)
                        {
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Delete"</span>, tree.graphicID);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot = tree.children[0];
                                <span style="font-weight: bold;">if</span> (<span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot != <span style="font-weight: bold; text-decoration: underline;">null</span>)
                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot.parent = <span style="font-weight: bold; text-decoration: underline;">null</span>;
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.resizeTree();
                        }
                }
                <span style="font-weight: bold;">else</span>
                {
                        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">parentNode</span> = tree.parent;
                        <span style="font-weight: bold;">for</span> (<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">parentIndex</span> = 0; parentNode.children[parentIndex] != tree; parentIndex++);
                        <span style="font-weight: bold;">if</span> (parentIndex &gt; 0 &amp;&amp; parentNode.children[parentIndex - 1].numKeys &gt; <span style="font-weight: bold; text-decoration: underline;">this</span>.min_keys)
                        {
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.stealFromLeft(tree, parentIndex);
                                
                        }
                        <span style="font-weight: bold;">else</span> <span style="font-weight: bold;">if</span> (parentIndex &lt; parentNode.numKeys &amp;&amp; parentNode.children[parentIndex + 1].numKeys &gt; <span style="font-weight: bold; text-decoration: underline;">this</span>.min_keys)
                        {
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.stealFromRight(tree,parentIndex);
                                
                        }
                        <span style="font-weight: bold;">else</span> <span style="font-weight: bold;">if</span> (parentIndex == 0)
                        {
                                <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">nextNode</span> = <span style="font-weight: bold; text-decoration: underline;">this</span>.mergeRight(tree);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.repairAfterDelete(nextNode.parent);                        
                        }
                        <span style="font-weight: bold;">else</span>
                        {
                                nextNode = <span style="font-weight: bold; text-decoration: underline;">this</span>.mergeRight(parentNode.children[parentIndex-1]);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.repairAfterDelete(nextNode.parent);                        
                                
                        }
                        
                        
                }
        }
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org2a84441" class="outline-3">
<h3 id="org2a84441"><span class="section-number-3">1.30</span> Function returns the label of the node in the tree.</h3>
<div class="outline-text-3" id="text-1-30">
<div class="org-src-container">
<pre class="src src-js" id="org69223ec">TwoThreeTree.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.getLabelX = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">tree</span>, <span style="font-weight: bold; font-style: italic;">index</span>) 
{
        <span style="font-weight: bold;">return</span> tree.x - WIDTH_PER_ELEM * tree.numKeys / 2 + WIDTH_PER_ELEM / 2 + index * WIDTH_PER_ELEM;
}

</pre>
</div>
</div>
</div>

<div id="outline-container-org9023616" class="outline-3">
<h3 id="org9023616"><span class="section-number-3">1.31</span> Function resizes the tree according to the start_x and start_y coordinate.</h3>
<div class="outline-text-3" id="text-1-31">
<div class="org-src-container">
<pre class="src src-js" id="orgaa2721b">TwoThreeTree.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.resizeTree = <span style="font-weight: bold;">function</span>()
{
        <span style="font-weight: bold; text-decoration: underline;">this</span>.resizeWidths(<span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.setNewPositions(<span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot, <span style="font-weight: bold; text-decoration: underline;">this</span>.starting_x, STARTING_Y);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.animateNewPositions(<span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org1add68d" class="outline-3">
<h3 id="org1add68d"><span class="section-number-3">1.32</span> Function responsible for setting the new position of the node in the tree. This needs to be called during insertion and deletion</h3>
<div class="outline-text-3" id="text-1-32">
<div class="org-src-container">
<pre class="src src-js" id="org571936f">TwoThreeTree.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.setNewPositions = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">tree</span>, <span style="font-weight: bold; font-style: italic;">xPosition</span>, <span style="font-weight: bold; font-style: italic;">yPosition</span>)
{
        <span style="font-weight: bold;">if</span> (tree != <span style="font-weight: bold; text-decoration: underline;">null</span>)
        {
                tree.y = yPosition;
                tree.x = xPosition;
                <span style="font-weight: bold;">if</span> (!tree.isLeaf)
                {
                        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">leftEdge</span> = xPosition - tree.width / 2;
                        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">priorWidth</span> = 0;
                        <span style="font-weight: bold;">for</span> (<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">i</span> = 0; i &lt; tree.numKeys+1; i++)
                        {
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.setNewPositions(tree.children[i], leftEdge + priorWidth + tree.widths[i] / 2, yPosition+HEIGHT_DELTA);
                                priorWidth += tree.widths[i];
                        }
                }                               
        }                       
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org9e5522c" class="outline-3">
<h3 id="org9e5522c"><span class="section-number-3">1.33</span> Function animates the new positions of elements in the tree this is called after and during the insertion, split and deletion operation.</h3>
<div class="outline-text-3" id="text-1-33">
<div class="org-src-container">
<pre class="src src-js" id="orgb207b89">TwoThreeTree.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.animateNewPositions = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">tree</span>)
{
        <span style="font-weight: bold;">if</span> (tree == <span style="font-weight: bold; text-decoration: underline;">null</span>)
        {
                <span style="font-weight: bold;">return</span>;
        }
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">i</span>;
        <span style="font-weight: bold;">for</span> (i = 0; i &lt; tree.numKeys + 1; i++)
        {
                <span style="font-weight: bold; text-decoration: underline;">this</span>.animateNewPositions(tree.children[i]);
        }
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Move"</span>, tree.graphicID, tree.x, tree.y);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb90bfc9" class="outline-3">
<h3 id="orgb90bfc9"><span class="section-number-3">1.34</span> Function resizes the width og the tree as a whole and node just the nodes. This width is calculated using number of keys in the tree, width per node and their spacing.</h3>
<div class="outline-text-3" id="text-1-34">
<div class="org-src-container">
<pre class="src src-js" id="org1394907">TwoThreeTree.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.resizeWidths = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">tree</span>) 
{
        <span style="font-weight: bold;">if</span> (tree == <span style="font-weight: bold; text-decoration: underline;">null</span>)
        {
                <span style="font-weight: bold;">return</span> 0;
        }
        <span style="font-weight: bold;">if</span> (tree.isLeaf)
        {
                <span style="font-weight: bold;">for</span> (<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">i</span> = 0; i &lt; tree.numKeys + 1; i++)
                {
                        tree.widths[i] = 0;
                }
                tree.width = tree.numKeys * WIDTH_PER_ELEM + NODE_SPACING;
                <span style="font-weight: bold;">return</span> tree.width;                              
        }
        <span style="font-weight: bold;">else</span>
        {
                <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">treeWidth</span> = 0;
                <span style="font-weight: bold;">for</span> (i = 0; i &lt; tree.numKeys+1; i++)
                {
                        tree.widths[i] = <span style="font-weight: bold; text-decoration: underline;">this</span>.resizeWidths(tree.children[i]);
                        treeWidth = treeWidth + tree.widths[i];
                }
                treeWidth = Math.max(treeWidth, tree.numKeys * WIDTH_PER_ELEM + NODE_SPACING);
                tree.width = treeWidth;
                <span style="font-weight: bold;">return</span> treeWidth;
        }
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org9077554" class="outline-3">
<h3 id="org9077554"><span class="section-number-3">1.35</span> Function takes in the id, intial pos_X and pos_Y and initialises the tree node.</h3>
<div class="outline-text-3" id="text-1-35">
<p>
+Determines where the node will get displayed. This function also declares the initial structure for the 23 node. As the node in a 23 tree can be either a two node or a three node, the number of keys in a node can be more than one.
</p>

<p>
+Also, a node can have left, right and middle subtree. There we declare approrpiate data structures here for this.
</p>

<div class="org-src-container">
<pre class="src src-js" id="orgd5b9772"><span style="font-weight: bold;">function</span> <span style="font-weight: bold;">TwoThreeTreeNode</span>(<span style="font-weight: bold; font-style: italic;">id</span>, <span style="font-weight: bold; font-style: italic;">initialX</span>, <span style="font-weight: bold; font-style: italic;">initialY</span>)
{
        <span style="font-weight: bold; text-decoration: underline;">this</span>.widths = [];
        <span style="font-weight: bold; text-decoration: underline;">this</span>.keys = [];
        <span style="font-weight: bold; text-decoration: underline;">this</span>.children = [];
        <span style="font-weight: bold; text-decoration: underline;">this</span>.x = initialX;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.y = initialY;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.graphicID = id;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.numKeys = 1;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.isLeaf = <span style="font-weight: bold; text-decoration: underline;">true</span>;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.parent = <span style="font-weight: bold; text-decoration: underline;">null</span>;
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.leftWidth = 0;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.rightWidth = 0;
        
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org0fec396" class="outline-3">
<h3 id="org0fec396"><span class="section-number-3">1.36</span> Function initialises the canvas on which the tree is rendered and is called first from the UI.</h3>
<div class="outline-text-3" id="text-1-36">
<p>
+It is reponsible for inital setup for rendering. This canvas is then passed to the two three tree constructor as am argument.
</p>

<div class="org-src-container">
<pre class="src src-js" id="org6c8b819"><span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">currentAlg</span>;

<span style="font-weight: bold;">function</span> <span style="font-weight: bold;">init</span>()
{
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">animManag</span> = initCanvas();
        currentAlg = <span style="font-weight: bold;">new</span> <span style="font-weight: bold; text-decoration: underline;">TwoThreeTree</span>(animManag, canvas.width, canvas.height);
}

</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org6e3ef12" class="outline-2">
<h2 id="org6e3ef12"><span class="section-number-2">2</span> Tangle</h2>
<div class="outline-text-2" id="text-2">
<div class="org-src-container">
<pre class="src src-js">&lt;&lt;DeclareVariables&gt;&gt;
&lt;&lt;Inheritance&gt;&gt;
&lt;&lt;InitializeTree&gt;&gt;
&lt;&lt;AddControls&gt;&gt;
&lt;&lt;Reset&gt;&gt;
&lt;&lt;EnableUI&gt;&gt;
&lt;&lt;DisableUI&gt;&gt;
&lt;&lt;InsertCallback&gt;&gt;
&lt;&lt;DeleteCallback&gt;&gt;
&lt;&lt;ClearCallback&gt;&gt;
&lt;&lt;PrintCallback&gt;&gt;
&lt;&lt;PrintTree&gt;&gt;
&lt;&lt;PrintTreeRecursive&gt;&gt;
&lt;&lt;ClearTree&gt;&gt;
&lt;&lt;DeleteTree&gt;&gt;
&lt;&lt;FindCallback&gt;&gt;
&lt;&lt;FindEement&gt;&gt;
&lt;&lt;FindInTree&gt;&gt;
&lt;&lt;InsertElement&gt;&gt;
&lt;&lt;ErrorCheck&gt;&gt;
&lt;&lt;Insert&gt;&gt;
&lt;&lt;InsertRepair&gt;&gt;
&lt;&lt;Split&gt;&gt;
&lt;&lt;DeleteElement&gt;&gt;
&lt;&lt;DoDelete&gt;&gt;
&lt;&lt;MergeRight&gt;&gt;
&lt;&lt;StealFromRight&gt;&gt;
&lt;&lt;StealFromLeft&gt;&gt;
&lt;&lt;RepairAfterDelete&gt;&gt;
&lt;&lt;GetLabel&gt;&gt;
&lt;&lt;ResizeTree&gt;&gt;
&lt;&lt;TreePosition&gt;&gt;
&lt;&lt;TreeAnimation&gt;&gt;
&lt;&lt;ResizeTreeWidth&gt;&gt;
&lt;&lt;TreeNode&gt;&gt;
&lt;&lt;InitializeAndRunTree&gt;&gt;
</pre>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: VLEAD</p>
<p class="date">Created: 2021-03-17 Wed 07:39</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
